<HxButton Color="ThemeColor.Primary" CssClass="mr-4"
          @onclick='() => NavigationManager.NavigateTo("/Manage/Tournaments/" + TournamentId + "/CreateNextRound")'>
    Create Next Round
</HxButton>
<HxListGroup CssClass="mt-4">
    @foreach (var s in rounds)
    {
        <HxListGroupItem @onclick='() => NavigationManager.NavigateTo("Manage/Leagues/" + s.Id)'>
            @s.RoundNumber
        </HxListGroupItem>
    }
</HxListGroup>

@code {
    private ICollection<TournamentRound> rounds { get; set; } = [];

    [CascadingParameter(Name = "TournamentId")]
    protected string TournamentId { get; set; }

    protected override async Task OnInitializedAsync()
    {
        await using var dbContext = await DbContextFactory.CreateDbContextAsync();
        rounds = await dbContext.TournamentRounds
            .Include(x => x.Games)
            .Where(x => x.TournamentId == int.Parse(TournamentId))
            .OrderBy(x => x.RoundNumber)
            .ToListAsync();
    }

}